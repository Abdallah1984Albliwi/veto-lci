<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8"/>
<meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=5.0, user-scalable=yes"/>
<title>VETO LCI — Live Collective Intelligence</title>
<link rel="icon" href="data:image/svg+xml,<svg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 100 100'><circle cx='50' cy='50' r='50' fill='%230f172a'/><circle cx='50' cy='50' r='30' fill='%238b5cf6'/></svg>"/>
<link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700;800&display=swap" rel="stylesheet">
<script src="https://unpkg.com/lucide@latest"></script>
<style>
/* Reset & Base */
*{margin:0;padding:0;box-sizing:border-box;-webkit-tap-highlight-color:transparent}
html{scroll-behavior:smooth;font-size:16px}
body{font-family:'Inter',sans-serif;background:linear-gradient(135deg,#0f172a 0%,#1e293b 100%);color:#fff;min-height:100vh;overflow-x:hidden;-webkit-font-smoothing:antialiased}

/* Particle Background */
.particles{position:fixed;inset:0;background:radial-gradient(2px 2px at 20% 30%,white,transparent),radial-gradient(2px 2px at 60% 70%,white,transparent);background-size:200px 200px;opacity:0.2;pointer-events:none;z-index:0}

/* Container */
.container{position:relative;z-index:1;max-width:1200px;margin:0 auto;padding:2rem 1.5rem;min-height:100vh;display:flex;flex-direction:column;justify-content:center}

/* Language Toggle */
.lang-toggle{position:fixed;top:1.5rem;right:1.5rem;background:rgba(139,92,246,0.15);border:1px solid rgba(139,92,246,0.3);color:#8b5cf6;padding:0.6rem 1.2rem;border-radius:8px;cursor:pointer;font-weight:600;font-size:0.9rem;transition:all 0.3s;z-index:100;min-height:44px;min-width:44px;display:flex;align-items:center;justify-content:center}
.lang-toggle:hover{background:rgba(139,92,246,0.25);transform:translateY(-1px)}
.lang-toggle:active{transform:translateY(0)}

/* Header */
.header{text-align:center;margin-bottom:3rem}
.logo{display:inline-flex;align-items:center;justify-content:center;gap:1rem;margin-bottom:1.5rem;flex-wrap:wrap}
.logo svg{width:64px;height:64px;filter:drop-shadow(0 0 20px rgba(139,92,246,0.5))}
.logo-text{font-size:clamp(2rem,8vw,3.5rem);font-weight:800;background:linear-gradient(135deg,#fff 0%,#8b5cf6 50%,#06b6d4 100%);-webkit-background-clip:text;-webkit-text-fill-color:transparent;background-clip:text;letter-spacing:-0.02em}
.tagline{font-size:clamp(1rem,4vw,1.3rem);color:#94a3b8;margin-bottom:0.8rem;font-weight:500;padding:0 1rem}
.subtitle{font-size:clamp(0.9rem,3vw,1rem);color:#64748b;max-width:600px;margin:0 auto;line-height:1.6;padding:0 1rem}

/* Card */
.card{background:rgba(30,41,59,0.8);backdrop-filter:blur(20px);border:1px solid rgba(139,92,246,0.2);border-radius:20px;padding:clamp(1.5rem,5vw,3rem);max-width:500px;margin:0 auto;box-shadow:0 20px 60px rgba(0,0,0,0.3);width:100%}
.card-title{font-size:clamp(1.3rem,5vw,1.8rem);font-weight:700;color:#e2e8f0;margin-bottom:0.8rem;text-align:center}
.card-subtitle{font-size:clamp(0.9rem,3vw,1rem);color:#94a3b8;text-align:center;margin-bottom:2rem;line-height:1.6}

/* Input Group */
.input-group{margin-bottom:1.2rem}
.input-label{display:block;color:#94a3b8;font-size:0.9rem;font-weight:500;margin-bottom:0.6rem}
input{width:100%;background:rgba(15,23,42,0.6);border:1px solid rgba(139,92,246,0.3);color:#e2e8f0;padding:1rem 1.2rem;border-radius:12px;font-size:1rem;font-family:inherit;transition:all 0.3s;min-height:48px}
input:focus{outline:none;border-color:#8b5cf6;box-shadow:0 0 0 3px rgba(139,92,246,0.15)}
input::placeholder{color:#64748b}

/* Buttons */
.btn{background:linear-gradient(135deg,#8b5cf6,#06b6d4);color:#fff;border:none;padding:1rem 2rem;border-radius:12px;font-size:1rem;font-weight:600;cursor:pointer;width:100%;transition:all 0.3s;box-shadow:0 8px 24px rgba(139,92,246,0.3);min-height:52px;display:flex;align-items:center;justify-content:center;gap:0.5rem}
.btn:hover{transform:translateY(-2px);box-shadow:0 12px 32px rgba(139,92,246,0.4)}
.btn:active{transform:translateY(0)}
.btn.secondary{background:rgba(139,92,246,0.15);border:1px solid rgba(139,92,246,0.3);box-shadow:none}
.btn.secondary:hover{background:rgba(139,92,246,0.25)}

/* Divider */
.divider{display:flex;align-items:center;gap:1rem;margin:1.5rem 0;color:#64748b;font-size:0.85rem;font-weight:500}
.divider::before,.divider::after{content:'';flex:1;height:1px;background:rgba(139,92,246,0.2)}

/* Footer */
.footer{text-align:center;margin-top:3rem;padding:1.5rem 1rem;color:#64748b;font-size:0.85rem}

/* Mobile Optimization - 320px to 480px */
@media(max-width:480px){
  html{font-size:14px}
  .container{padding:1.5rem 1rem}
  .header{margin-bottom:2rem}
  .logo{gap:0.8rem}
  .logo svg{width:48px;height:48px}
  .card{padding:1.5rem;border-radius:16px}
  .lang-toggle{top:1rem;right:1rem;padding:0.5rem 1rem;font-size:0.85rem}
  .btn{padding:0.9rem 1.5rem;font-size:0.95rem}
  input{padding:0.9rem 1rem;font-size:0.95rem}
}

/* Large Mobile / Small Tablet - 481px to 768px */
@media(min-width:481px) and (max-width:768px){
  .container{padding:2rem 1.5rem}
  .card{max-width:480px}
}

/* Tablet - 769px to 1024px */
@media(min-width:769px) and (max-width:1024px){
  .container{padding:3rem 2rem}
  .card{max-width:520px}
}

/* Desktop - 1025px+ */
@media(min-width:1025px){
  .container{padding:4rem 2rem}
}

/* Landscape Mobile */
@media(max-height:500px) and (orientation:landscape){
  .container{padding:1rem}
  .header{margin-bottom:1.5rem}
  .logo svg{width:40px;height:40px}
  .card{padding:1.5rem}
  .footer{margin-top:1.5rem;padding:1rem}
}

/* Touch Optimization */
@media(hover:none) and (pointer:coarse){
  .btn,.input,.lang-toggle{min-height:48px}
  input{font-size:16px} /* Prevents zoom on iOS */
}

/* High DPI Screens */
@media(-webkit-min-device-pixel-ratio:2),(min-resolution:192dpi){
  body{-webkit-font-smoothing:antialiased;-moz-osx-font-smoothing:grayscale}
}

/* Print */
@media print{
  .lang-toggle{display:none}
}
</style>
</head>
<body>

<div class="particles"></div>

<button class="lang-toggle" onclick="toggleLang()" id="langBtn">العربية</button>

<div class="container">
  
  <div class="header">
    <div class="logo">
      <svg viewBox="0 0 100 100">
        <circle cx="50" cy="50" r="48" fill="#0a1628" stroke="#8b5cf6" stroke-width="3"/>
        <circle cx="50" cy="50" r="28" fill="#8b5cf6"/>
        <circle cx="50" cy="50" r="12" fill="#0a1628"/>
        <circle cx="42" cy="42" r="4" fill="rgba(255,255,255,0.4)"/>
      </svg>
      <div style="display:flex;flex-direction:column;align-items:center;gap:0">
        <span class="logo-text">VETO</span>
        <span style="font-size:0.4em;color:#8b5cf6;font-weight:700;letter-spacing:0.15em;margin-top:-0.5rem">LCI</span>
      </div>
    </div>
    <p class="tagline" id="tagline">Live Collective Intelligence</p>
    <p class="subtitle" id="subtitle">Real-time collaborative thinking where ideas merge into collective wisdom</p>
  </div>

  <div class="card">
    <h2 class="card-title" id="cardTitle">Start Your Session</h2>
    <p class="card-subtitle" id="cardSubtitle">Create a new session or join an existing one</p>
    
    <button class="btn" onclick="createSession()">
      <i data-lucide="brain-circuit" style="width:20px;height:20px;stroke:currentColor"></i>
      <span id="createBtn">Create New Session</span>
    </button>
    
    <div class="divider" id="divider">OR</div>
    
    <div class="input-group">
      <label class="input-label" id="joinLabel">Join existing session:</label>
      <input type="text" id="sessionInput" placeholder="Enter Session ID..." maxlength="8" autocomplete="off" autocapitalize="characters">
    </div>
    
    <button class="btn secondary" onclick="joinSession()">
      <span id="joinBtn">→ Join Session</span>
    </button>
  </div>

  <div class="footer">
    <p id="footerText">VETO — Where minds converge</p>
  </div>

</div>

<script src="https://www.gstatic.com/firebasejs/10.7.0/firebase-app-compat.js"></script>
<script src="https://www.gstatic.com/firebasejs/10.7.0/firebase-database-compat.js"></script>

<script>
const firebaseConfig={apiKey:"AIzaSyAieHsN-E8-NQK8P-SrV9oWIZsBj060vNo",authDomain:"veto-d1412.firebaseapp.com",projectId:"veto-d1412",databaseURL:"https://veto-d1412-default-rtdb.asia-southeast1.firebasedatabase.app"};
firebase.initializeApp(firebaseConfig);
const db=firebase.database();

let currentLang='en';

const translations={
  en:{
    tagline:'Live Collective Intelligence',
    subtitle:'Real-time collaborative thinking where ideas merge into collective wisdom',
    cardTitle:'Start Your Session',
    cardSubtitle:'Create a new session or join an existing one',
    createBtn:'Create New Session',
    divider:'OR',
    joinLabel:'Join existing session:',
    sessionInput:'Enter Session ID...',
    joinBtn:'→ Join Session',
    langBtn:'العربية',
    footerText:'VETO LCI — Where minds converge',
    alertEnter:'Please enter a session ID',
    alertNotFound:'Session not found or ended',
    alertFailed:'Failed to create session'
  },
  ar:{
    tagline:'الذكاء الجماعي الحي',
    subtitle:'التفكير التعاوني اللحظي حيث تندمج الأفكار في حكمة جماعية',
    cardTitle:'ابدأ جلستك',
    cardSubtitle:'أنشئ جلسة جديدة أو انضم لجلسة موجودة',
    createBtn:'إنشاء جلسة جديدة',
    divider:'أو',
    joinLabel:'انضم لجلسة موجودة:',
    sessionInput:'أدخل رقم الجلسة...',
    joinBtn:'← انضم للجلسة',
    langBtn:'English',
    footerText:'VETO — حيث تتلاقى العقول',
    alertEnter:'يرجى إدخال رقم الجلسة',
    alertNotFound:'الجلسة غير موجودة أو منتهية',
    alertFailed:'فشل إنشاء الجلسة'
  }
};

function toggleLang(){
  currentLang=currentLang==='en'?'ar':'en';
  const t=translations[currentLang];
  document.documentElement.setAttribute('lang',currentLang);
  document.documentElement.setAttribute('dir',currentLang==='ar'?'rtl':'ltr');
  
  document.getElementById('langBtn').textContent=t.langBtn;
  document.getElementById('tagline').textContent=t.tagline;
  document.getElementById('subtitle').textContent=t.subtitle;
  document.getElementById('cardTitle').textContent=t.cardTitle;
  document.getElementById('cardSubtitle').textContent=t.cardSubtitle;
  document.getElementById('createBtn').textContent=t.createBtn;
  document.getElementById('divider').textContent=t.divider;
  document.getElementById('joinLabel').textContent=t.joinLabel;
  document.getElementById('sessionInput').placeholder=t.sessionInput;
  document.getElementById('joinBtn').textContent=t.joinBtn;
  document.getElementById('footerText').textContent=t.footerText;
}

function generateSessionId(){
  return Math.random().toString(36).substr(2,8).toUpperCase();
}

async function createSession(){
  const sessionId=generateSessionId();
  try{
    await db.ref('sessions/'+sessionId).set({
      created:Date.now(),
      active:true,
      participants:0,
      title:'',
      collectiveMind:''
    });
    window.location.href='session.html?id='+sessionId+'&lang='+currentLang;
  }catch(e){
    alert(translations[currentLang].alertFailed);
  }
}

function joinSession(){
  const sessionId=document.getElementById('sessionInput').value.trim().toUpperCase();
  if(!sessionId){
    alert(translations[currentLang].alertEnter);
    return;
  }
  db.ref('sessions/'+sessionId).once('value',snapshot=>{
    if(snapshot.exists()&&snapshot.val().active){
      window.location.href='session.html?id='+sessionId+'&lang='+currentLang;
    }else{
      alert(translations[currentLang].alertNotFound);
    }
  });
}

// Prevent zoom on iOS double-tap
document.addEventListener('dblclick',e=>e.preventDefault());

// Initialize Lucide icons
lucide.createIcons();
</script>

</body>
</html>
